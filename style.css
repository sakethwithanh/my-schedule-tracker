/* --- IMPORTS & GLOBAL SETTINGS --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

/* --- THEME & DESIGN TOKENS --- */
:root {
    --font-family: 'Inter', sans-serif;
    --radius-sm: 6px; --radius-md: 10px;
    --transition-fast: 0.2s ease; --transition-med: 0.3s ease;
    
    /* Dark Theme */
    --bg-dark: #111827; --container-dark: #1F2937; --text-primary-dark: #F9FAFB;
    --text-secondary-dark: #9CA3AF; --border-dark: #374151; --shadow-dark: rgba(0,0,0,0.2);
    
    /* Light Theme */
    --bg-light: #F3F4F6; --container-light: #FFFFFF; --text-primary-light: #111827;
    --text-secondary-light: #6B7280; --border-light: #E5E7EB; --shadow-light: rgba(0,0,0,0.05);
    
    /* Universal */
    --accent-gradient: linear-gradient(90deg, #34D399 0%, #10B981 100%);
    --accent-color-start: #34D399; --accent-color-end: #10B981;
    --danger-color: #EF4444; --info-color: #3B82F6;
    --priority-high: #EF4444; --priority-medium: #F59E0B; --priority-low: #3B82F6;
}

body {
    --bg-color: var(--bg-dark); --container-bg: var(--container-dark); --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark); --border-color: var(--border-dark); --shadow-color: var(--shadow-dark);
}
body.light-theme {
    --bg-color: var(--bg-light); --container-bg: var(--container-light); --text-primary: var(--text-primary-light);
    --text-secondary: var(--text-secondary-light); --border-color: var(--border-light); --shadow-color: var(--shadow-light);
}

* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
    font-family: var(--font-family); background-color: var(--bg-color); color: var(--text-primary);
    padding: 20px; min-height: 100vh; transition: background-color var(--transition-fast);
}

/* --- MAIN LAYOUT --- */
.main-layout {
    display: grid; grid-template-columns: 2fr 1fr; gap: 24px;
    max-width: 1400px; margin: 0 auto;
}
section {
    background-color: var(--container-bg); padding: 24px; border-radius: var(--radius-md);
    border: 1px solid var(--border-color); box-shadow: 0 4px 6px -1px var(--shadow-color);
    transition: background-color var(--transition-fast), border-color var(--transition-fast);
}
.header {
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid var(--border-color); padding-bottom: 16px; margin-bottom: 20px;
}
h1, h2 { font-weight: 700; }
.header-controls { display: flex; align-items: center; gap: 12px; }

/* --- GLOBAL UI ELEMENTS --- */
input, select, button { font-family: inherit; font-size: 14px; }
.gradient-btn {
    cursor: pointer; background: var(--accent-gradient); border: none; color: white;
    font-weight: 500; padding: 10px 16px; border-radius: var(--radius-sm);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}
.gradient-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(16, 185, 129, 0.2); }
input, select {
    background-color: var(--bg-color); border: 1px solid var(--border-color);
    color: var(--text-primary); padding: 8px 12px; border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
}
input:focus, select:focus { outline: none; border-color: var(--accent-color-start); box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2); }
.icon-btn {
    background: transparent; border: none; color: var(--text-secondary); cursor: pointer;
    padding: 6px; border-radius: var(--radius-sm); display: flex; align-items: center;
    justify-content: center; transition: background-color var(--transition-fast), color var(--transition-fast);
}
.icon-btn:hover { background-color: var(--border-color); color: var(--text-primary); }

/* --- SCHEDULE LIST & ITEMS --- */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.schedule-item {
    display: flex; flex-direction: column; border-radius: var(--radius-sm); position: relative;
    border: 1px solid var(--border-color); margin-bottom: 12px; overflow: hidden;
    padding-left: 10px; animation: fadeInUp 0.4s ease-out forwards;
    transition: box-shadow var(--transition-fast);
}
.schedule-item::before { /* Priority bar */
    content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
    background-color: var(--priority-medium); transition: background-color var(--transition-fast);
}
.schedule-item[data-priority="high"]::before { background-color: var(--priority-high); }
.schedule-item[data-priority="low"]::before { background-color: var(--priority-low); }
.schedule-item:hover { box-shadow: 0 0 0 1px var(--border-color); }
.task-main-info { display: flex; align-items: center; gap: 16px; padding: 12px 8px; cursor: pointer; }
.task-name-priority { flex: 3; display: flex; align-items: center; gap: 8px; font-weight: 500; }
.time-col { flex: 2; color: var(--text-secondary); text-align: center; font-size: 14px; }
.status-col { flex: 1; } .actions-col { flex: 0.5; }
.status-buttons { display: flex; justify-content: center; gap: 8px; }
.status-btn.selected { color: var(--accent-color-start); }
.delete-task-btn:hover { color: var(--danger-color); }
.priority-selector { display: flex; gap: 4px; opacity: 0; transition: opacity var(--transition-fast); }
.schedule-item:hover .priority-selector { opacity: 1; }
.priority-btn { width: 12px; height: 12px; border-radius: 50%; border: 2px solid var(--border-color); cursor: pointer; }
.priority-btn[data-priority="high"] { background-color: var(--priority-high); }
.priority-btn[data-priority="medium"] { background-color: var(--priority-medium); }
.priority-btn[data-priority="low"] { background-color: var(--priority-low); }
.priority-btn:not(.active) { opacity: 0.3; }
.task-notes-area {
    max-height: 0; overflow: hidden; transition: max-height var(--transition-med);
    padding: 0 12px;
}
.task-notes-area:not(.hidden) { max-height: 200px; padding: 4px 12px 12px; }
.notes-input { width: 100%; resize: vertical; min-height: 60px; font-size: 14px; }
.empty-state { text-align: center; padding: 40px; color: var(--text-secondary); }
.empty-state svg { margin-bottom: 16px; opacity: 0.5; }
.add-task-container { padding-top: 20px; border-top: 1px solid var(--border-color); margin-top: 20px; }
#add-task-form { display: flex; gap: 8px; margin-bottom: 12px; }
#add-task-form input { flex: 1; }
#manage-templates-btn { background: transparent; border: 1px solid var(--border-color); color: var(--text-secondary); padding: 8px 14px; border-radius: var(--radius-sm); cursor: pointer; transition: all var(--transition-fast); font-weight: 500; }
#manage-templates-btn:hover { background-color: var(--border-color); color: var(--text-primary); }

/* --- REPORT SECTION --- */
.report-section .header { align-items: flex-start; }
#report-insights { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; width: 100%; margin-bottom: 24px; }
.insight-card { background-color: var(--bg-color); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 16px; display: flex; flex-direction: column; text-align: center; }
.insight-title { font-size: 12px; color: var(--text-secondary); margin-bottom: 8px; }
.insight-value { font-size: 18px; font-weight: 700; color: var(--text-primary); }
#report-details ul { list-style: none; padding: 0; }
#report-details li { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 16px; padding: 10px 0; border-bottom: 1px solid var(--border-color); }
#report-details li:last-child { border-bottom: none; }
#report-details h4 { font-weight: 500; font-size: 14px; }
.progress-bar-container { width: 100%; grid-column: 1 / -1; background: var(--border-color); height: 6px; border-radius: 3px; overflow: hidden; margin-top: 6px; }
.progress-bar { height: 100%; background: var(--accent-gradient); border-radius: 3px; transition: width 0.5s ease-out; }

/* --- MODAL & TOASTS --- */
.hidden { display: none !important; }
#templates-modal-overlay { /* ... (same as previous) ... */ position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(17, 24, 39, 0.8); display: flex; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(8px); animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
#templates-modal { background: var(--container-bg); border-radius: var(--radius-md); padding: 24px; width: 90%; max-width: 500px; position: relative; border: 1px solid var(--border-color); box-shadow: 0 10px 30px -15px var(--shadow-color); }
#templates-modal .icon-btn { position: absolute; top: 12px; right: 12px; }
.template-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border-color); }
.template-actions { display: flex; gap: 10px; margin-top: 20px; }
.template-actions input { flex-grow: 1; }
#toast-container { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 2000; display: flex; flex-direction: column; gap: 10px; }
.toast { background-color: var(--container-bg); color: var(--text-primary); padding: 12px 20px; border-radius: var(--radius-sm); box-shadow: 0 4px 12px var(--shadow-color); border: 1px solid var(--border-color); transform: translateY(20px); opacity: 0; transition: transform var(--transition-med), opacity var(--transition-med); }
.toast.show { transform: translateY(0); opacity: 1; }
.toast-success { border-left: 4px solid var(--accent-color-start); }
.toast-error { border-left: 4px solid var(--danger-color); }
.toast-info { border-left: 4px solid var(--info-color); }

/* --- RESPONSIVE STYLES --- */
@media (max-width: 1024px) {
    .main-layout { grid-template-columns: 1fr; }
    .report-column { margin-top: 24px; }
}
@media (max-width: 640px) {
    body { padding: 12px; }
    .main-layout { gap: 16px; }
    section { padding: 16px; }
    .header { flex-direction: column; align-items: flex-start; gap: 12px; }
    .task-main-info {
        flex-wrap: wrap;
        /* Add space on the right for the absolutely positioned delete button */
        padding-right: 40px;
    }
    .task-name-priority { flex-basis: 100%; order: 1; }
    .time-col { flex-basis: 50%; order: 2; text-align: left; }
    .status-col { flex-basis: 50%; order: 3; }
    
    /* --- THIS IS THE FIX --- */
    .actions-col {
        /* display: none;  <-- This line was removed */
        position: absolute;
        top: 8px;
        right: 8px;
    }
}
